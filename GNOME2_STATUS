# -*- reStructuredText -*-

Intro
-----

This is a ad-hoc list of what works and doesn't work in the g2
port of gnucash.  The plan is to finish porting those parts of gnucash
that have already been started (i.e. new windowing system, account
tree, commodities tree, etc.), but not to port any additional features
unless absolutely required.  The clist/ctree widgets *do* still exist
in gtk2 and can be used, even though they've been marked as deprecated
and will disappear in a future release.  Its important to get this
release out the door and not stall it until all the deprecated
functionality has been removed.

========================================
              DONE
========================================

Help
Financial Calculator
Commodity Editor
Price Editor
Reconcile
Transfer
View Toolbar
View Statusbar
Properties Dialog
QIF Import
OFX Import
HBCI Actions
Export Accounts
Stock Split Dialog

    +-----
    | Can someone who comes across this note and wants to help please go
    | through 1.8.x and create a list of stuff missing from 2.0?
    +------------

========================================
            General Notes
========================================

Resources
---------
- Porting applications to the GNOME 2.0 Platform -- http://developer.gnome.org/dotplan/porting/
- Introduction to GConf -- http://developer.gnome.org/feature/archive/gconf/gconf.html

- General

  - Printing

    - Printing checks works.
    - Printing text reports works.
    - Printing pie/bar charts fails.

  - Open pages are no longer open after reopening file.
    - Account tree, register and report pages are restored.
    - Budget and business pages are not restored.
    - Trying to reopen a multi-column report spits lots of
      warning. Trying to edit that pages options crashes gnucash.

- Register Core - mostly functional

  - doesn't remember custom check formats.

  - Edit > {Cut,Copy,Paste} not functioning on first invocation.

- Reporting / Graphing [mostly functional]

  - Graphing working, with some known issue; see top
    of src/gnome-utils/gnc-html-graph-gog.c for more detail.

    - colors

    - axis-label string rotation

    - Known issue with height/width bug in libgtkhtml 3.3.2 (on FC3).

  - When rendering, progress bar always says "Rendering 'Untitled' report...".

    - warlord reports this was true in 1.8 as well.

- Budgeting

  - Budget Report

    - the default account selection isn't very reasonable, Inc & Exp
      would be better

    - sometimes negative numbers render on two lines in their table-cell

  - Budget GUI

    - default account filter doesn't take effect until options are
      opened, should take effect as soon as view is opened

    - it might be nice to disallow some of the more unusual recurrences

    - better if budget list dialog allowed double click to open

    - need help text

    - should displaying zero values be optional?

    - it'd be nice if there was a summary column at the far right

  - Budget Engine

    - Do budgets play nice with QSF?

    - Still a lot of dead legacy code hanging around

- New Account Hierarchy - somewhat works

  - Placeholder status should be set on relevant (non-leaf) accounts?

  - Sometimes crashes when loading account data.

  - 2006-01-02: do these problems still exist?

    - [jsled, 2006-01-03] yes...

      - After opening, mousing over the existing account-tree changes all my
        '$'s to 'USD'.

      - I'm unable to cancel this dialog.

- Account Hierarchy Merge - BROKEN

  - Bad integration with Account Hierarchy druid

  - Static variables used for process/window state.

  - Misc errors with no apparent cause

    - (gnucash:27485): Gtk-CRITICAL **: gtk_widget_event: assertion `WIDGET_REALIZED_FOR_EVENT (widget, event)' failed

    - (gnucash:27485): Gtk-CRITICAL **: gtk_widget_event: assertion `WIDGET_REALIZED_FOR_EVENT (widget, event)' failed

  - Doesn't let you complete the conflict resolution process, thus you can never complete the druid.

    - (jsled) actually, it just doesn't display the 1-conflict -> 0-conflict
      transition in the UI correctly, but it does allow you to finish.

  - conflict-resolution process/display issues.

  - weird...

    - Merge Druid -forward-> Account Druid -cancel-| => book commodity (?) changes

  - conflict resolution

<jsled> hampton: hmm.  trying to figure out the ui here; I think it's:
<jsled> 1/ make the account-name directly-editable in the account-tree view.
<jsled> 2/ Change the "add opening balance" page to "edit accounts".
<jsled> 3/ Add a "existing?" column next to the account name.
<jsled> 4/ the accounts and editing becomes stateful in a semi-complex way:
<hampton> That sounds like a plan.  #2 will also make account names editable anywhere where an account tree is used which is good (accounts page, budgets page) and bad (transfer dialog, etc.)
<jsled> there's a 2-bit state space: placeholder-account? and shares-name-woth-existing?
<jsled> re: editable names: ah, noted; configurably editable, then.
<jsled> s/woth/with/
<jsled> placeholder=true, shares=true: use existing, no problem.
<jsled> placeholder=true, shares=false: create new, no problem
<jsled> placeholder=false, shares=true: existing account with same name exists, problem (blocks druid close)
<jsled> placeholder=false, shares=false: create new, no problem.
<hampton> I would state it differently.
<jsled> Maybe ... another Messages column to indicate the problem case...
<hampton> shares=false, placeholder=don't care: create new, no problem.
<hampton> shares=true, placeholder=same as existing: use existing, no problem
<hampton> shares=true, placeholder=diff from existing: problem
<jsled> Ah.  Yup.
<jsled> Well, kinda.
<jsled> Ignoring the placeholders for a moment, there are really two types of example-accounts: those that expect the name to be edited, and those that don't.
<jsled> Those roughly correlate with the placeholder setting.
<jsled> But if you're re-running the account-hierarchy druid to add another credit card, you should be encouraged to enter a different name for the leaf account.
<hampton> Its more a question of where the dialog was called from. If from the new user code, you really don't need to edit names.  If called from the merge druid, the user should be encouraged to edit leaf names.

- Backend

  - price_lookup awaits a solution - as a query instead of a backend operation.

- Scheduled Transactions

  - Since Last Run dialog should be audited for menus and ledger capabilities.

    - e.g. The To-Create-Transaction read-only review ledger doesn't need any
      menus or editing functionality.

  - [minor] Since Last Run uses deprecated GTKCTrees.

  - SX Editor

    - bug/crash: http://lists.gnucash.org/pipermail/gnucash-devel/2006-January/015300.html

    - Template-register View > {Basic, Auto-Split} options have no effect

      - Note: they *shouldn't* have any effect, as they don't apply to
        General Ledgers.  That means, however, they should either not appear
        or be disabled.

  - Open SX Editor, close it; open Register Preferences, change "Draw
    {horiz,vert} lines" => crash.

========================================
              ENHANCEMENTS
========================================

- New icons

  - Add account.

  - Register

  - Report

    - "Report options", especially, since it often confuses users.

- In-place editing

  - Provide in-place editing where feasable.  Eg.  Editing the account code
    or the account name, but not being able to re-parent the account.  (Maybe
    add DND support for this in long-term?)

- Find

  - There's no way to edit/refine a search.
    [There's no way to do so in 1.8, either...]

- Scheduled Transactions

  - Entering a value (e.g. '20.00') without entering an account or a memo for
    the first split causes everything else entered so far to be reset when
    tabbing to the second split.
