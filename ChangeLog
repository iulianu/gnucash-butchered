2001-04-08  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/taxtxf.scm: don't use deprecated calls

	* src/guile/gnc.gwp: wrap xaccAccountGetSplitList

	* src/engine/Query-xml-parser-v1.c
	(qrestore_datepred_start_handler): use g_new0 instead of bzero --
	more portable

2001-04-07  Dave Peticolas  <dave@krondo.com>

	* src/engine/md5.h: include stddef.h for size_t

	* src/engine/sql/PostgresBackend.c: include ctype.h for tolower

	* src/engine/guid.h: include stddef.h for size_t

	* src/engine/gnc-engine-util.h: include stddef.h for size_t

	* src/scm/report/taxtxf.scm: fix bug

	* src/scm/text-export.scm: fix for api change

	* src/scm/report-utilities.scm: fix for api change

	* src/scm/engine-utilities.scm: change gnc:group-map-accounts
	to gnc:group-map-all-accounts. make gnc:group-map-accounts do
	only the immediate children.

	* src/gnome/dialog-price-editor.c: more work

	* src/engine/gnc-pricedb.c: add an error check

	* ChangeLog: split changelog

2001-04-06  Rob Browning  <rlb@cs.utexas.edu>

	* src/scm/process.scm (gnc:run-sub-process): some process control
	fixes seen on guile-devel.	

2001-04-06  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-price-editor.c: new file with price db
	editor. Unfinished.

	* src/engine/gnc-pricedb.c: connect prices to pricedbs

2001-04-05  Dave Peticolas  <dave@krondo.com>

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): fix
	for files with no pricedb section

2001-04-04  Dave Peticolas  <dave@krondo.com>

	* src/scm/prefs.scm: add price editor geometry options

2001-04-06  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/balance-sheet.scm: Major overhaul. Adapted to new
	options in gnc:html-build-acct-table. Cleaned up code. Corrected
	column alignment.

	* src/scm/html-utilities.scm (gnc:html-table-append-ruler!): New
	function.
	(gnc:html-build-acct-table): Added new arguments for how to show
	non-leaf accounts: with subtotal or not, with own balance or
	not. Removed some empty lines in the html-table.

	* src/scm/report/pnl.scm, account-summary.scm: Added support for
	new gnc:html-build-acct-tree options.

	* src/scm/report-utilities.scm (gnc:decompose-accountlist): Added
	equity accounts.

2001-04-05  James LewisMoss  <jimdres@mindspring.com>

	* src/test/test-xml-transaction.c: guess what?

	* src/test/test-xml-commodity.c: genericify all over.

	* src/test/test-xml-account.c: genericify all over.

	* src/test/gnc-test-stuff.c (test_load_file): use new generic
	interface. 
	(test_files_in_dir): same.

	* src/engine/io-gncxml-v2.h (struct sixtp_global_data_v2_struct):
	remove all the stuff made uneccesary by generification.

	* src/engine/io-gncxml-v2.c (gnc_counter_end_handler): same as below.
	(generic_callback): new func for generic callback.
	(gnc_book_load_from_xml_file_v2): use new generic callback
	mechanism. 

	* src/engine/gnc-transaction-xml-v2.c
	(gnc_transaction_end_handler): same as below.

	* src/engine/gnc-pricedb-xml-v1.c (pricedb_v2_end_handler): same
	as below.

	* src/engine/gnc-commodity-xml-v2.c (gnc_commodity_end_handler):
	same as below.

	* src/engine/gnc-account-xml-v2.c (gnc_account_end_handler):
	genericify the callback mechanism.

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): move
	xaccLogDisable call.

2001-04-05  Christian Stimming  <stimming@tuhh.de>

	* src/scm/html-table.scm (gnc:html-table-remove-last-row!): Added
	function.

	* src/scm/html-utilities.scm (gnc:html-build-acct-table): Added
	removal of the last empty line above the total sum.

	* src/scm/html-document.scm: changed rendering of #f from one
	whitespace to equally arbitrary three whitespaces. FIXME: This
	should be configurable by a style-sheet.

	* src/scm/report/pnl.scm: deactivated column headers.

2001-04-05  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/balance-sheet.scm: Relabel summary rows, fix
	asset calculation bugs.

2001-04-04  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/balance-sheet.scm: calculate retained profits
	explicitly, display (liabilities + equity) to allow people
	to check balances.

2001-04-04  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-sheet.c
	(gnucash_register_goto_next_trans_row): new func.

	* src/gnome/window-register.c: make 'enter' toolbar button
	move to next transaction

	* src/gnome/dialog-tax-info.c: more work

	* src/gnome/dialog-account.c: allow opening balances to come
	from other accounts

	* src/gnome/dialog-totd.c (totd_close_cb): don't bother with the
	help dialog after disabling tips

2001-04-04  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/gnc-html-guppi.c, src/scm/html-barchart.scm: Added new
	option for barchart: legend-reversed.

2001-04-04  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/balance-sheet.scm: calculate retained profits
	explicitly, display (liabilities + equity) to allow people
	to check balances.

2001-04-04  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/sixtp-dom-parsers.c (dom_tree_to_timespec): use
	g_free rather than free (ben's find)
	(dom_tree_to_gnc_numeric): same.

2001-04-03  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-sheet.c: move cursor before showing
	popup menu

	* src/gnome/window-register.c: add a Transaction->Invoice item

	* src/engine/Query.c: add GUID predicate

	* src/gnome/dialog-commodity.c: add namespace picker getter.
	Show "CURRENCY" instead of "ISO4217" when displaying.

	* src/gnome/druid-commodity.c: use namespace picker getter

	* src/gnome/druid-qif-import.c: use namespace picker getter

	* src/scm/report/register.scm: more work

	* src/engine/gnc-commodity.c (reset_printname): take the namespace
	out of the printname

	* src/gnome/dialog-account.c: add opening balance support

	* src/gnc-ui-util.c (gnc_find_or_create_equity_account): new func.
	(gnc_account_create_opening_balance): new func.

	* src/gnome/gnc-dateedit.c: add some error checking

	* src/gnome/gnc-commodity-edit.c: add "changed" signal

	* src/scm/report/register.scm: fix bug

2001-04-03  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/html-table.scm (gnc:html-table-prepend-row!): Fix
	bug.

	* src/scm/report/html-utilities.scm (gnc:build-html-acct-table): Add
	show-col-headers option.

	* src/scm/report/balance-sheet.scm: New file.  Code for a balance
	sheet report.  Numbers should be correct, presentation is
	rudimentary as usual.

	* src/scm/report/account-summary.scm: modify for changed arguments
	to gnc:build-html-acct-table.

	* src/scm/report/pnl.scm: modify for changed arguments to
	gnc:build-html-account-table.
	
2001-04-02  Dave Peticolas  <dave@krondo.com>

	* Makefile.am: add po/README

	* src/gnome/window-main.c: hide developer menu

	* src/gnome/window-register.c: add invoice menu item

	* src/scm/prefs.scm: add user name & address option for invoice
	report. add option for whether reports appear in main window or
	open in new window

	* src/scm/report.scm: open reports based on new option

	* src/scm/report/transaction-report.scm: more work

	* src/scm/report/register.scm: more work

2001-04-01  Dave Peticolas  <dave@krondo.com>

	* src/FileDialog.c: update for api change

	* src/gnome/window-report.c: update for api change

	* src/gnome/gnc-html.c: update for api change

	* src/gnome/window-main.c: update for api change

	* src/gnome/cursors.c (gnc_set_busy_cursor): add extra arg
	to determine whether to update cursor immediately

	* src/gnome/druid-qif-import.c: update for api change

	* src/gnome/window-help.c: expand the top nodes initially
	(gnc_help_show_topic): show the topic in the tree when it
	can be found

	* src/gnome/gnc-html.c: set busy cursor before start request

2001-03-31  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-utils.c (gnc_get_gdk_imlib_image): new func

	* src/scm/report.scm: translate report name

	* src/gnome/window-main.c: fix some i18n bugs

2001-03-31  Christian Stimming  <stimming@tuhh.de>

	* src/scm/html-utilities.scm (gnc:html-build-acct-table): fix
	horizontal line width if foreign currencies are shown.  

2001-03-31  James LewisMoss  <jimdres@mindspring.com>

	* src/test/test-xml-account.c (node_and_account_equal): fix parent
	id test.  duh.

	* src/test/test-real-data.sh (EXIT_VALUE): check for empty FILES
	return.

	* src/test/test-xml-commodity.c (main): fix argc test.

	* src/test/test-xml-account.c (main): fix argc test.

	* src/test/test-xml-commodity.c (main): fix argc test

	* src/test/test-load-xml2.c (main): call xaccLogDisable

	* src/test/test-xml-transaction.c (main): call xaccLogDisable

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2):
	comment out load debug info.

	* src/test/test-real-data.sh (EXIT_VALUE): don't run on a
	directory. 

	* src/test/gnc-test-stuff.c (test_files_in_dir): rename vars
	file_count -> argc, files -> argv to be more accurate.

2001-03-31  Dave Peticolas  <dave@krondo.com>

	* src/scm/options.scm: add a text option type

	* src/gnome/dialog-options.c: add support for text options

	* src/gnome/window-main.c (gnc_ui_about_cb): set parent

	* src/scm/report/register.scm: more work

	* src/scm/html-document.scm: fix bug

2001-03-30  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): add
	stuff from file format 1 ledger data start and end handlers to
	disable enable log, mark saved, and the rest.

	* src/engine/gnc-book.c (gnc_book_write_to_file): clean up
	writing.  Write only once.
	(gnc_book_write_to_file): extract out backup functionality.
	(gnc_book_backup_file): new func with extracted functionality.
	(gnc_book_backup_file): add more permament backup for binary
	data.

	* src/engine/gnc-account-xml-v2.c (gnc_account_end_handler): add
	begin edit so that everyhing doesn't get recomputed till end.

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): add
	commit of all accounts at end.

	* src/engine/gnc-book.c (gnc_book_write_to_file): use v2 write.
