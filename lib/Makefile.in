# Makefile -- makefile for gnucash/lib
# Copyright (C) 1997 Robin Clark
# Copyright (C) 1998 Rob Browning <rlb@cs.utexas.edu>
# 
# This program is free software; you can redistribute it and/or 
# modify it under the terms of the GNU General Public License as
# published by the Free Software Foundation; either version 2 of 
# the License, or (at your option) any later version. 
# 
# This program is distributed in the hope that it will be useful,  
# but WITHOUT ANY WARRANTY; without even the implied warranty of 
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the 
# GNU General Public License for more details. 
# 
# You should have received a copy of the GNU General Public License
# along with this program; if not, contact:
#
# Free Software Foundation           Voice:  +1-617-542-5942
# 59 Temple Place - Suite 330        Fax:    +1-617-542-2652
# Boston, MA  02111-1307,  USA       gnu@gnu.org

include @top_srcdir@/Makefile.init

######################################################################
# Description of targets:
#
#   default      -- make the application
#   clean        -- remove *.a, *.o, *.bak, and *~
#   distclean    -- get rid of config files too...
#   install      -- ??todo??
#

######################################################################
# See Makefile.common for information about these variables.
CLEAN_SUBDIRS := ComboBox-1.33 Xbae-4.6.2-linas g-wrap
######################################################################

all:
	@echo " "
	@echo "Please choose one of the following targets:"
	@echo "motif           motif version"
	@echo "gnome           gnome/gtk version"
	@echo "qt              kde/qt version"
	@echo " "

# This inclusion must come after the first target, and after the
# definitions of *_SRCS, etc., but before the usage of *_OBJS.
include @top_srcdir@/Makefile.common


# Right now we only configure g-wrap once per make distclean, but we
# try and re-build every make.
g-wrap.configure:
	(cd g-wrap && \
	 ./configure --prefix=${ABSOLUTE_TOP_SRCDIR}/lib/g-wrap-install)
	touch g-wrap.configure
DIST_TRASH += g-wrap.configure

g-wrap-install: g-wrap.configure
	(cd g-wrap && ${MAKE})
	(cd g-wrap && ${MAKE} install)
TRASH += g-wrap-install

.PHONY: g-wrap-install


motif motif.static: g-wrap-install
	@cd ComboBox-1.33;    $(MAKE) default
	@cd Xbae-4.6.2-linas; $(MAKE) default

gnome gnome.static: g-wrap-install

qt qt.static: g-wrap-install


.PHONY: all gnome gnome.static motif motif.static qt qt.static dist
